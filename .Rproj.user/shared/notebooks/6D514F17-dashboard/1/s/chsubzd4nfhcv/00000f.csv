"0",""
"0","library(httr2)"
"0","library(purrr)"
"0","library(dplyr)"
"0",""
"0","show_id <- ""1lUPomulZRPquVAOOd56EW"""
"0",""
"0",""
"0","get_all_episodes <- function(show_id, access_token) {"
"0","  limit <- 50"
"0","  offset <- 0"
"0","  all_episodes <- list()"
"0","  "
"0","  repeat {"
"0","    url <- paste0(""https://api.spotify.com/v1/shows/"", show_id, ""/episodes"")"
"0","    "
"0","    resp <- request(url) |>"
"0","      req_headers(Authorization = paste(""Bearer"", access_token)) |>"
"0","      req_url_query(limit = limit, offset = offset) |>"
"0","      req_perform()"
"0","    "
"0","    content <- resp |> resp_body_json()"
"0","    "
"0","    # Append items"
"0","    all_episodes <- append(all_episodes, content$items)"
"0","    "
"0","    # Break if there's no more 'next' page"
"0","    if (is.null(content[[""next""]])) {"
"0","      break"
"0","    }"
"0","    "
"0","    offset <- offset + limit"
"0","  }"
"0","  "
"0","  # Convert to dataframe"
"0","  df <- map_dfr(all_episodes, function(ep) {"
"0","    tibble("
"0","      name = ep$name,"
"0","      release_date = ep$release_date,"
"0","      duration_ms = ep$duration_ms,"
"0","      description = ep$description,"
"0","      episode_url = ep$external_urls$spotify"
"0","    )"
"0","  })"
"0","  "
"0","  return(df)"
"0","}"
"0",""
"0",""
