renv::status()
renv::snapshot()
renv::status()
library(MASS, lib.loc = "/Users/andrewkates/Library/Caches/org.R-project.R/R/renv/sandbox/macos/R-4.4/aarch64-apple-darwin20/f7156815")
library(MASS, lib.loc = "/Users/andrewkates/Library/Caches/org.R-project.R/R/renv/sandbox/macos/R-4.4/aarch64-apple-darwin20/f7156815")
renv::status()
?Renviron
library(renv)
Sys.getenv()
Sys.getenv("MY_USERNAME")
paste0("Username:", Sys.getenv("MY_USERNAME"))
paste0("Username:", Sys.getenv("MY_USERNAME"))
paste0("Username:", Sys.getenv("MY_USERNAME"))
Sys.getenv("SPOTIFY_CLIENT_ID")
paste0("Username:", Sys.getenv("MY_USERNAME"))
Sys.getenv("SPOTIFY_CLIENT_ID")
library(httr2)
install.packages("httr2")
renv::snapshot()
#| echo: false
#| include: false
client_id <- Sys.getenv("SPOTIFY_CLIENT_ID")
client_secret <- Sys.getenv("SPOTIFY_CLIENT_SECRET")
library(httr2)
curl_translate('curl -X POST "https://accounts.spotify.com/api/token" \
-H "Content-Type: application/x-www-form-urlencoded" \
-d "grant_type=client_credentials&client_id=your-client-id&client_secret=your-client-secret"
')
#| echo: false
#| include: false
client_id <- Sys.getenv("SPOTIFY_CLIENT_ID")
client_secret <- Sys.getenv("SPOTIFY_CLIENT_SECRET")
# curl_translate('curl -X POST "https://accounts.spotify.com/api/token" \
#      -H "Content-Type: application/x-www-form-urlencoded" \
#      -d "grant_type=client_credentials&client_id=your-client-id&client_secret=your-client-secret"
# ')
req_access_token <- request("https://accounts.spotify.com/api/token") |>
req_method("POST") |>
req_body_raw(paste0(
"grant_type=client_credentials&client_id=",
client_id,
"&client_secret=",
client_secret,
), "application/x-www-form-urlencoded") |>
req_perform() |>
resp_body_json()
spotify_access_token <- req_access_token$access_token
#| echo: false
#| include: false
client_id <- Sys.getenv("SPOTIFY_CLIENT_ID")
client_secret <- Sys.getenv("SPOTIFY_CLIENT_SECRET")
# curl_translate('curl -X POST "https://accounts.spotify.com/api/token" \
#      -H "Content-Type: application/x-www-form-urlencoded" \
#      -d "grant_type=client_credentials&client_id=your-client-id&client_secret=your-client-secret"
# ')
req_access_token <- request("https://accounts.spotify.com/api/token") |>
req_method("POST") |>
req_body_raw(paste0(
"grant_type=client_credentials&client_id=",
client_id,
"&client_secret=",
client_secret
), "application/x-www-form-urlencoded") |>
req_perform() |>
resp_body_json()
spotify_access_token <- req_access_token$access_token
curl_translate(
"curl --request GET \
--url https://api.spotify.com/v1/playlists/3cEYpjA9oz9GiPac4AsH4n \
--header 'Authorization: Bearer 1POdFZRZbvb...qqillRxMr2z'"
)
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token),
) |>
req_perform() |>
resp_body_json()
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
rlang::last_trace()
playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token),
) |>
req_perform() |>
resp_body_json()
playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer", spotify_access_token),
) |>
req_perform() |>
resp_body_json()
playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1DXcBWIGoYBM5M") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/37i9dQZF1Fd5ObpLLLCFOo") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/6sragYMYn4QDDTZXxoEC1H") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
View(tth)
tth$tracksitems[[1]]
tth$tracks$items[[1]]
tth$tracks$items[[1]]$track$name
unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name }))
top_hits_df <- data.frame(
song_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name })),
song_id = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$id })),
artist_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$artists[[1]]$name})),
album_art = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$images[[1]]$url})),
track_duration = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$duration_ms})),
popularity = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$popularity}))
)
View(top_hits_df)
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/6sragYMYn4QDDTZXxoEC1H") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
top_hits_df <- data.frame(
song_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name })),
song_id = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$id })),
artist_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$artists[[1]]$name})),
album_art = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$images[[1]]$url})),
track_duration = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$duration_ms})),
popularity = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$popularity}))
)
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/6sragYMYn4QDDTZXxoEC1H") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
top_hits_df <- data.frame(
song_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name })),
song_id = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$id })),
artist_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$artists[[1]]$name})),
album_art = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$images[[1]]$url})),
track_duration = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$duration_ms})),
popularity = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$popularity}))
)
tempo_list <- vector(mode = "list", length = 3)
for (i in 1:3) {
audio_analysis <- request(paste0("https://api.spotify.com/v1/audio-analysis/", top_hits_df$song_id[i])) |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token),
) |>
req_perform() |>
resp_body_json()
# Get tempo for each section of the song
tempo_list[[i]] <- unlist(lapply(audio_analysis$sections, FUN = function(x) {x$tempo }))
}
View(tempo_list)
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/6sragYMYn4QDDTZXxoEC1H") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
top_hits_df <- data.frame(
song_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name })),
song_id = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$id })),
artist_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$artists[[1]]$name})),
album_art = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$images[[1]]$url})),
track_duration = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$duration_ms})),
popularity = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$popularity}))
)
tempo_list <- vector(mode = "list", length = 3)
for (i in 1:3) {
audio_analysis <- request(paste0("https://api.spotify.com/v1/audio-analysis/", top_hits_df$song_id[i])) |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
# Get tempo for each section of the song
tempo_list[[i]] <- unlist(lapply(audio_analysis$sections, FUN = function(x) {x$tempo }))
}
curl_translate("curl --request GET \
--url https://api.spotify.com/v1/audio-analysis/11dFghVXANMlKmJXsNCbNl \
--header 'Authorization: Bearer 1POdFZRZbvb...qqillRxMr2z'")
#playlist_id <- "37i9dQZF1DXcBWIGoYBM5M"
tth <- request("https://api.spotify.com/v1/playlists/6sragYMYn4QDDTZXxoEC1H") |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token)
) |>
req_perform() |>
resp_body_json()
top_hits_df <- data.frame(
song_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$name })),
song_id = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$id })),
artist_name = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$artists[[1]]$name})),
album_art = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$album$images[[1]]$url})),
track_duration = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$duration_ms})),
popularity = unlist(lapply(tth$tracks$items, FUN = function(x) {x$track$popularity}))
)
tempo_list <- vector(mode = "list", length = 3)
for (i in 1:3) {
audio_analysis <- request(paste0("https://api.spotify.com/v1/audio-analysis/", top_hits_df$song_id[i])) |>
req_method("GET") |>
req_headers(
Authorization = paste0("Bearer ", spotify_access_token),
) |>
req_perform()
resp_body_json()
# Get tempo for each section of the song
tempo_list[[i]] <- unlist(lapply(audio_analysis$sections, FUN = function(x) {x$tempo }))
}
